#!/usr/bin/env groovy

//@Library('shared-library@master') _ //master or whatever branch

pipeline{

    agent any
    tools {
        maven 'Maven'

    }
        
        stages{

              stage('maven build'){
                 environment {
	    		 	SCANNER_HOME = tool 'sonarScanner'
	  			  }
                  steps{
                      script{
		    	                sh "mvn clean install"
                      	  }
			         withSonarQubeEnv('Sonar_Cloud') {
				       sh '${SCANNER_HOME}/bin/sonar-scanner -Dproject.settings=${SCANNER_HOME}/conf/sonar-scanner-cloud.properties'
			       
						}                      	  
                    
               	     }  
                 }	
                 
                 stage ('Check logs') {
                    steps {
                    	script{
                        filterLogs ('WARNING', 5)
                        }
                    }
                }
		
           }	       	     	         
}